<!DOCTYPE html>
<html>

<body style="background-color: black;">
    <img src="Warrior_Red.png" hidden />
    <canvas></canvas>

    <script>
        //JAVASCRIPT

        const canvas = document.querySelector('canvas') //variavel canvas
        const ctx = canvas.getContext('2d') //contexto
        const imagem = document.querySelector('img');

        canvas.width = 1024;
        canvas.height = 768;

        function desenhaCavaleiroAnimado(x, y, linha, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte) {
            ctx.drawImage(imagem,
                comprimentoDoCorte * frameDaAnimacao,
                alturaDoCorte * linha,
                comprimentoDoCorte, alturaDoCorte,
                x, y,
                comprimentoDoCorte, alturaDoCorte
            )
        }

        let y = 100;
        let frameDaAnimacao = 0;
        let frames = 0;
        function animacao() {
            requestAnimationFrame(animacao)

            ctx.fillStyle = "white";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = "red";
            ctx.fillRect(50, y, 50, 50);

            const comprimentoDoCorte = imagem.width / 6; //5 é o numero de desenhos do sprite
            const alturaDoCorte = imagem.height / 8; //2 é o numero de linhas do sprite

            ctx.drawImage(imagem,
                comprimentoDoCorte * frameDaAnimacao, //x do inicio do corte da image
                0,                                    //y do inicio do corte da image  
                comprimentoDoCorte, alturaDoCorte,  //comprimento e altura do corte
                100, 100,                           //x e y para desenhar o corte
                comprimentoDoCorte, alturaDoCorte  //comprimento e altura do desenho final
            )

            desenhaCavaleiroAnimado(250, 100, 1, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)
            desenhaCavaleiroAnimado(400, 100, 2, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)
            desenhaCavaleiroAnimado(550, 100, 3, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)

            desenhaCavaleiroAnimado(100, 250, 4, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)
            desenhaCavaleiroAnimado(250, 250, 5, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)
            desenhaCavaleiroAnimado(400, 250, 6, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)
            desenhaCavaleiroAnimado(550, 250, 7, frameDaAnimacao, comprimentoDoCorte, alturaDoCorte)

            if (y < 300)
                y = y + 1;

            if (frames % 10 == 0) {
                //pega o resto da divisão
                if (frameDaAnimacao < 4) //5 desenhos -1
                    frameDaAnimacao = frameDaAnimacao + 1
                else
                    frameDaAnimacao = 0
            }

            frames = frames + 1
        }
        animacao()

    </script>
</body>

</html>